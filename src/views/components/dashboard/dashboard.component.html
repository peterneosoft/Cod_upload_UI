<section class="user">
  <div class="animated fadeIn">
    <!-- <div>
      <b-link style="text-align: right" @click="POPUP"><h4>Change Hub</h4> </b-link>
    </div> -->
    <!--/.col-->
      <div class="card-header filter_main">
        <i class=" fa fa-filter filter"></i> <strong> Search </strong>
      </div>
      <b-card>
        <div class="card-body1">
          <form  v-on:submit.prevent="onSubmit">
            <div class="form-group row">
             <div class="col-md-4">
               <label>Zone</label>
               <b-input-group left="<i class='fa fa-list'></i>">
                 <select  name="zone" id="zone"  v-model="zone" v-on:change="getStateData" v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('zone') }">
                   <option value="">--Select--</option>
                   <option v-for="zone_obj in zoneList" v-bind:title="zone_obj.hubzoneid" v-bind:value="zone_obj.hubzonename" >{{zone_obj.hubzonename}}</option>
                 </select>
               </b-input-group>
               <span v-show="errors.has('zone')" class="text-danger">Please select zone. </span>
             </div>

              <div class="col-md-4">
                <label>State</label>
                <b-input-group left="<i class='fa fa-list'></i>">
                  <select name="state" id="state" class="form-control" v-model="state" v-on:change="getCityData">
                    <option value="">--Select--</option>
                    <option v-for="state_obj in stateList" v-bind:title="state_obj.stateid" v-bind:value="state_obj.statename" >{{state_obj.statename}}</option>
                  </select>
                </b-input-group>
              </div>
              <div class="col-md-4">
                <label>City</label>
                <b-input-group left="<i class='fa fa-list'></i>">
                  <select name="city" id="city" class="form-control" v-model="city">
                    <option value="">--Select--</option>
                    <option v-for="city_obj in cityList" v-bind:title="city_obj.cityid" v-bind:value="city_obj.cityname" >{{city_obj.cityname}}</option>
                  </select>
                </b-input-group>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-md-4">
                <label>From Date</label>
                <b-input-group left="<i class='fa fa-user'></i>">
                  <b-form-input id="date-input" type="date" placeholder=" Enter User Type" v-model="FromDate"></b-form-input>
                </b-input-group>
              </div>
              <div class="col-md-4">
                <label>To Date</label>
                <b-input-group left="<i class='fa fa-user'></i>">
                  <b-form-input id="date-input" type="date" placeholder=" Enter User Type" v-model="ToDate"></b-form-input>
                </b-input-group>
              </div>
              <div class="col-md-4">
                <label>&nbsp;</label>
                <b-input-group>
                <button class="btn btn-sm btn-primary" type="submit"><i class="fa fa-search"></i> Search</button>
                </b-input-group>
              </div>
            </div>
          </form>
        </div>
      </b-card>

      <div class="col-xs-12">
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                 <center><div  style="height:15rem">
                  <div class="card-body">
                    <div v-if="resultdata">
                      <h6 colspan="6" align="middle" style="color:red;">No Record Found</h6>
                    </div>
                    <highcharts :options="BarChart"></highcharts>
                  </div>
                 </div>
              </center>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
               <center>
                <div  style="width: 20rem;height:15rem">
                 <div class="card-body">
                   <highcharts :options="piechart"></highcharts>
                 </div>
                </div>
              </center>
            </div>
          </div>
        </div>

        <div class ="row" style="margin-top: 130px;">
          <div class="col-6" style="margin-top: 35px;">
            <div class="card-headerfrm" style="margin-bottom: 15px;">
              <table class="table-bordered table-hover tbl datatables tableBodyScroll">
                <thead>
                  <tr class="text-primary">
                    <th class="text-center tableheader"><b>Hub Name</b></th>
                    <th class="text-center tableheader"><b>Receivable</b></th>
                    <th class="text-center tableheader"><b>Pending</b></th>
                    <th class="text-center tableheader"><b>Total Amount</b></th>
                    <th class="text-center tableheader"><b>Received </b></th>
                    <th class="text-center tableheader"><b>Outstanding</b></th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-if="resultHubCollCount==0">
                    <td colspan="6" align="center">No record found</td>
                  </tr>
                  <tr v-for="(data,index) in hubCollectionList">
                    <td>{{data.hubname}}</td>
                    <td><i class="fa fa-rupee"></i> {{data.receivable}}</td>
                    <td><i class="fa fa-rupee"></i> {{data.pending}}</td>
                    <td><i class="fa fa-rupee"></i> {{data.total}}</td>
                    <td><i class="fa fa-rupee"></i> {{data.received}}</td>
                    <td><i class="fa fa-rupee"></i> {{data.outstanding}}</td>
                  </tr>
                </tbody>
              </table>
             </div>
            </div>

            <div class="col-5" style="margin-top: 20px;">
             <b-card-group deck>
              <div class="card text-dark bg-success mb-3  mt-4" style=" ">
                 <div class="card-body">
                   <b style="font-weight: bold;"><p>Top Collection</p><hr style="border-top: 1px solid rgb(0, 0, 0);">
                   <p class="card-text">{{maxCOD.hubname}}</p>
                   <p class="card-text"><i class="fa fa-rupee"></i> {{maxCOD.value}}</p></b>
                 </div>
              </div>

              <div class="card text-dark bg-danger mb-3 mt-4" style= "">
                <div class="card-body">
                  <b style="font-weight: bold;"><p>Least Collection</p><hr style="border-top: 1px solid rgb(0, 0, 0);">
                  <p class="card-text">{{minCOD.hubname}}</p>
                  <p class="card-text"><i class="fa fa-rupee"></i> {{minCOD.value}}</p></b>
                </div>
              </div>
            </b-card-group>
           </div>
        </div>
      </div>

       <b-modal size="vlg" v-model="calcModal" @ok="calcModal = false">
         <b-card>
           <div slot="header">
             <span class="mdltitle">Login Details</span>
             <button type="button" aria-label="Close" @click="closeCalcModal" class="close">Ã—</button>
           </div>
             <form v-on:submit.prevent="onSubmit">
               <div class="form-group row">
                <div class="col-md-3">
                 <label>Zone</label>
                 <b-input-group >
                   <select name="popupZone" id="popupZone" class="form-control" v-model="popupZone" v-on:change="getStateData" >
                     <option value="">--Select--</option>
                     <option v-for="zone_obj in zoneList" v-bind:value="zone_obj.hubzonename" >{{zone_obj.hubzonename}}</option>
                   </select>
                 </b-input-group>
               </div>

               <div class="col-md-3">
                 <label>State</label>
                 <b-input-group >
                   <select name="popupState" id="popupState" class="form-control" v-model="popupState" v-on:change="getCityData"  >
                     <option value="">--Select--</option>
                     <option v-for="state_obj in stateList" v-bind:value="state_obj.statename" >{{state_obj.statename}}</option>
                   </select>
                 </b-input-group>
               </div>

               <div class="col-md-3">
                 <label>City</label>
                 <b-input-group>
                   <select name="PopupCity" id="PopupCity" class="form-control" v-model="PopupCity"  v-on:change = "getHubData" >
                     <option value="">--Select--</option>
                     <option v-for="city_obj in cityList" v-bind:value="city_obj.cityname" >{{city_obj.cityname}}</option>
                   </select>
                 </b-input-group>
               </div>
                 <div class="col-md-3">
                 <label>Hub</label>
                 <b-input-group>
                   <select name="hub" id="hub" class="form-control" v-model="hub">
                     <option value="">--Select--</option>
                     <option v-for="hub_obj in hubList" v-bind:value="hub_obj.HubName" >{{hub_obj.HubName}}</option>
                   </select>
                 </b-input-group>
               </div>
             </div>

           <div class="modal-footerfrm">
           <button type="submit"  size="vlg" class="btn btn-primary">Submit</button>&nbsp;
           <button type="button" size="vlg" class="btn btn-danger" @click="closeCalcModal">Cancel</button>
         </div>
        </form>
       </b-card>
      </b-modal>
    </div>
  </div>
</section>
