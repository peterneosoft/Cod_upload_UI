<section>
<div class="animated fadeIn">
  <!-- <div>
    <b-link style="text-align: right" @click="POPUP"><h4>Change Hub</h4> </b-link>
  </div> -->
      <!--/.col-->
      <div class="col-xs-12 col-sm-12 col-lg-12 col-lg-12 pdl_0">
        <div class="card h-100 block_hgt">
          <div class="h-100 form-verticle">
            <div class="col-xs-2  h-100 col-sm-2 col-lg-2 col-lg-2 float-left">
              <label>Zone</label>
              <b-input-group>
                <select   name="zone" id="zone" class="form-control" v-model="zone" v-on:change="getStateData" v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('zone') }">
                  <option value="">--Select--</option>
                  <option v-for="zone_obj in zoneList" v-bind:value="zone_obj.hubzonename" >{{zone_obj.hubzonename}}</option>
                </select>
              </b-input-group>
            </div>
            <div class="col-xs-2 col-sm-2 col-lg-2 col-lg-2 float-left">
              <label>State</label>
              <b-input-group>
                <select name="state" id="state" class="form-control" v-model="state" v-on:change="getCityData"  v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('state') }">
                  <option value="">--Select--</option>
                  <option v-for="state_obj in stateList" v-bind:value="state_obj.statename" >{{state_obj.statename}}</option>
                </select>
              </b-input-group>
              </b-input-group>
            </div>
            <div class="col-xs-2 col-sm-2 col-lg-2 col-lg-2 float-left">
              <label>City</label>
              <b-input-group>
                <select name="city" id="city" class="form-control" v-model="city"   v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('city') }">
                  <option value="">--Select--</option>
                  <option v-for="city_obj in cityList" v-bind:value="city_obj.cityname" >{{city_obj.cityname}}</option>
                </select>
              </b-input-group>
            </div>
            <div class="col-xs-2 col-sm-2 col-lg-2 col-lg-2 float-left">
              <label>From Date</label>
              <b-input-group left="<i class='fa fa-user'></i>">
                <b-form-input id="date-input" type="date" placeholder=" Enter User Type" v-model="FromDate"></b-form-input>
              </b-input-group>
            </div>
            <div class="col-xs-2 col-sm-2 col-lg-2 col-lg-2 float-left">
              <label>To Date</label>
              <b-input-group left="<i class='fa fa-user'></i>">
                <b-form-input id="date-input" type="date" placeholder=" Enter User Type" v-model="ToDate"></b-form-input>
              </b-input-group>
            </div>
            <div style= "margin-top:2em;">
            <button class="btn btn-sm btn-primary" type="submit"><i class="fa fa-search"></i> Search</button>
          </div>
           </div>
       </div>

    <div class="card" style="height: 550px;">
     <div class="card-body">
      <div class="row">
      <div class="col-lg-6">
       <div class="border border-dark" >
         <center><h6>West</h6></center>
         <!-- <div class="chart-wrapper"style="width: 20rem;height:20rem" >
           <bar-example/>
         </div> -->
         <b-card>
         <div>
         <p class="progress-labels">
           Pending:
         </p>
         <b-progress  height="25rem" :max="max"  v-bind:value="pendPerc"   variant="success" show-progress class="mt-2 w-75" ></b-progress>
       </div>
       <div>
         <p class="progress-labels">
           Received:
         </p>
         <b-progress  height="2rem" v-bind:value="recPerc" :max="max"  variant="info"  show-progress class="mt-4 w-75"  ></b-progress>
         </div>
         <div>
         <label class="progress-label">
           Total Amount:
         </label>
         <b-progress  height="2rem"  v-bind:value="totPerc" :max="max"  variant="danger"  show-progress class="mt-4 w-75 h-70" ></b-progress>
         </div>
       </b-card>
         </div>
       </div>

       <div class="col-lg-6">
        <div class="border border-dark" >
          <center><h6>Total Orders</h6></center>
          <center><div class="chart-wrapper"  style="width: 18rem;height:18rem">
          
          <PieExample  :data="datacollection"  />
          </div></center>
        </div>
       </div>
      </div>
    </div>

    <div class ="row">
      <div class="col-6">
        <div class="card-headerfrm" style="margin-bottom: 15px;">
          <table class="table-bordered table-hover tbl datatables tableBodyScroll">
            <thead>
              <tr class="text-primary">
                <th class="text-center tableheader"><b>Hub Name</b></th>
                <th class="text-center tableheader"><b>Receivable</b></th>
                <th class="text-center tableheader"><b>Pending</b></th>
                <th class="text-center tableheader"><b>Total Amount</b></th>
                <th class="text-center tableheader"><b>Received </b></th>
                <th class="text-center tableheader"><b>Outstanding</b></th>
              </tr>
            </thead>
            <tbody>
              <tr v-if="resultHubCollCount==0">
                <td colspan="6" align="center">No record found</td>
              </tr>
              <tr v-for="(data,index) in hubCollectionList">
                <td>{{data.hubname}}</td>
                <td><i class="fa fa-rupee"></i> {{data.receivable}}</td>
                <td><i class="fa fa-rupee"></i> {{data.pending}}</td>
                <td><i class="fa fa-rupee"></i> {{data.total}}</td>
                <td><i class="fa fa-rupee"></i> {{data.received}}</td>
                <td><i class="fa fa-rupee"></i> {{data.outstanding}}</td>
              </tr>
            </tbody>
          </table>
         </div>
        </div>

        <div class="col-5">
         <b-card-group deck>
          <div class="card text-dark bg-success mb-3  mt-4" style=" ">
             <div class="card-body">
               <b style="font-weight: bold;"><p>Top Collection</p><hr style="border-top: 1px solid rgb(0, 0, 0);">
               <p class="card-text">{{maxCOD.hubname}}</p>
               <p class="card-text"><i class="fa fa-rupee"></i> {{maxCOD.value}}</p></b>
             </div>
          </div>

          <div class="card text-dark bg-danger mb-3 mt-4" style= "">
            <div class="card-body">
              <b style="font-weight: bold;"><p>Least Collection</p><hr style="border-top: 1px solid rgb(0, 0, 0);">
              <p class="card-text">{{minCOD.hubname}}</p>
              <p class="card-text"><i class="fa fa-rupee"></i> {{minCOD.value}}</p></b>
            </div>
          </div>
        </b-card-group>
       </div>
    </div>
  </div>
         <b-modal size="vlg" v-model="calcModal" @ok="calcModal = false">
           <b-card>
             <div slot="header">
               <span class="mdltitle">Login Details</span>
               <button type="button" aria-label="Close" @click="closeCalcModal" class="close">Ã—</button>
             </div>
               <form v-on:submit.prevent="onSubmit">
                 <div class="form-group row">
                  <div class="col-md-3">
                   <label>Zone</label>
                   <b-input-group >
                     <select name="popupZone" id="popupZone" class="form-control" v-model="popupZone" v-on:change="getStateData" v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('popupZone') }">
                       <option value="">--Select--</option>
                       <option v-for="zone_obj in zoneList" v-bind:value="zone_obj.hubzonename" >{{zone_obj.hubzonename}}</option>
                     </select>
                   </b-input-group>
                   <span v-show="errors.has('popupZone')" class="text-danger">Please select Zone. </span>
                 </div>

                 <div class="col-md-3">
                   <label>State</label>
                   <b-input-group >
                     <select name="popupState" id="popupState" class="form-control" v-model="popupState" v-on:change="getCityData"  v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('popupState') }">
                       <option value="">--Select--</option>
                       <option v-for="state_obj in stateList" v-bind:value="state_obj.statename" >{{state_obj.statename}}</option>
                     </select>
                   </b-input-group>
                    <span v-show="errors.has('popupState')" class="text-danger">Please select state. </span>
                 </div>

                   <div class="col-md-3">
                   <label>City</label>
                   <b-input-group>
                     <select name="PopupCity" id="PopupCity" class="form-control" v-model="PopupCity"  v-on:change = "getHubData" v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('PopupCity') }">
                       <option value="">--Select--</option>
                       <option v-for="city_obj in cityList" v-bind:value="city_obj.cityname" >{{city_obj.cityname}}</option>
                     </select>
                   </b-input-group>
                     <span v-show="errors.has('PopupCity')" class="text-danger">Please select city. </span>
                 </div>
                   <div class="col-md-3">
                   <label>Hub</label>
                   <b-input-group>
                     <select name="hub" id="hub" class="form-control" v-model="hub"   v-validate="'required'" v-bind:class="{'form-control': true, 'error': errors.has('hub') }">
                       <option value="">--Select--</option>
                       <option v-for="hub_obj in hubList" v-bind:value="hub_obj.HubName" >{{hub_obj.HubName}}</option>
                     </select>
                   </b-input-group>
                   <span v-show="errors.has('hub')" class="text-danger">Please select hub. </span>
                 </div>
               </div>

             <div class="modal-footerfrm">
             <button type="submit"  size="vlg" class="btn btn-primary">Submit</button>&nbsp;
             <button type="button" size="vlg" class="btn btn-danger" @click="closeCalcModal">Cancel</button>
           </div>
          </form>
         </b-card>
        </b-modal>
     </div>
   </div>

</section>
